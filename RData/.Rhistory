paste(codes,collapse="."),
format(Sys.Date(),
"%y%m%d.pdf"),
sep="_")),
height=6,
width=10,
pointsize=10)
tcplPlotM4ID(m4ids, lvl=6)
graphics.off()
View(dat)
?tcplPlotM4ID
tcplPlotFits(dat, order.fitc=TRUE, flg=TRUE)
tcplPlotFits(dat)
?tcplPlotM4ID
tcplPlotM4ID(m4ids, lvl=6L)
graphics.off()
pdf(file=file.path(getwd(),
paste("L6DR",
paste(codes,collapse="."),
format(Sys.Date(),
"%y%m%d.pdf"),
sep="_")),
height=6,
width=10,
pointsize=10)
tcplPlotM4ID(m4ids, lvl=6L)
graphics.off()
graphics.off()
pdf(file=file.path(getwd(),
paste("L6DR",
paste(codes,collapse="."),
format(Sys.Date(),
"%y%m%d.pdf"),
sep="_")),
height=6,
width=10,
pointsize=10)
tcplPlotM4ID(m4ids, lvl=6L)
graphics.off()
View(dat)
library(tcpl)
tcplConf(user='kpaulfri', pass='password1', db='invitrodb', host='au.epa.gov', drvr='MySQL')
codes<-c('C107200')
chem<-tcplLoadChem('code', codes)
dat<-tcplLoadData(lvl=4,fld='spid',val=chem$spid,type='mc')
m4ids <- dat[, m4id]
graphics.off()
pdf(file=file.path(getwd(),
paste("L6DR",
paste(codes,collapse="."),
format(Sys.Date(),
"%y%m%d.pdf"),
sep="_")),
height=6,
width=10,
pointsize=10)
tcplPlotM4ID(m4ids, lvl=6)
graphics.off()
graphics.off()
pdf(file=file.path(getwd(),
paste("L6DR",
paste(codes,collapse="."),
format(Sys.Date(),
"%y%m%d.pdf"),
sep="_")),
height=6,
width=10,
pointsize=10)
tcplPlotM4ID(m4ids, lvl=6)
graphics.off()
tcplPlotM4ID
View(dat)
test<-dat[c(grep('Tox21', spid)) := NULL,]
library(data.table)
test<-dat[c(grep('Tox21', spid)) := NULL,]
is.data.table(dat)
test<-dat[c(grep('Tox21', spid)) := NULL]
dat<-dat[!grep('Tox21', spid)]
View(dat)
m4ids <- dat[, m4id]
graphics.off()
pdf(file=file.path(getwd(),
paste("L6DR",
paste(codes,collapse="."),
format(Sys.Date(),
"%y%m%d.pdf"),
sep="_")),
height=6,
width=10,
pointsize=10)
tcplPlotM4ID(m4ids, lvl=6L)
graphics.off()
View(dat)
View(dat)
?tcplPlotM4ID
?tcplPlotFits
?tcplVarMat
tcplVarMat(chid=20292)
library(devtools)
devtools::install_git("http://kpaulfri@bitbucket.zn.epa.gov/scm/tox/tcpl.git")
library(tcpl)
tcplConf(user='kpaulfri', pass='password1', db='invitrodb', host='au.epa.gov', drvr='MySQL')
library(data.table)
chemdb<-tcplLoadChem()
codes<-c('C107200')
chem<-tcplLoadChem('code', codes)
dat<-tcplLoadData(lvl=4,fld='spid',val=chem$spid,type='mc')
# dat<-data.table(dat)
# m4ids <-as.integer(dat$m4id)
# m4ids<-data.table(m4ids)
is.data.table(dat)
dat<-dat[!grep('Tox21', spid)]
m4ids <- dat[, m4id]
#make PDF of plots by chemical
graphics.off()
pdf(file=file.path(getwd(),
paste("L6DR",
paste(codes,collapse="."),
format(Sys.Date(),
"%y%m%d.pdf"),
sep="_")),
height=6,
width=10,
pointsize=10)
tcplPlotM4ID(m4ids, lvl=6L)
graphics.off()
graphics.off()
pdf(file=file.path(getwd(),
paste("L6DR",
paste(codes,collapse="."),
format(Sys.Date(),
"%y%m%d.pdf"),
sep="_")),
height=6,
width=10,
pointsize=10)
tcplPlotM4ID(m4ids, lvl=6L)
graphics.off()
tcplPlotM4ID(m4ids, lvl=6L)
graphics.off()
pdf(file=file.path(getwd(),
paste("L6DR",
paste(codes,collapse="."),
format(Sys.Date(),
"%y%m%d.pdf"),
sep="_")),
height=6,
width=10,
pointsize=10)
tcplPlotM4ID(m4ids, lvl=6L)
graphics.off()
codes<-c('C107200')
chem<-tcplLoadChem('code', codes)
dat<-tcplLoadData(lvl=4,fld='spid',val=chem$spid,type='mc')
dat<-dat[!grep('Tox21', spid)]
m4ids <- dat[, m4id]
#make PDF of plots by chemical
graphics.off()
pdf(file=file.path(getwd(),
paste("L6DR",
paste(codes,collapse="."),
format(Sys.Date(),
"%y%m%d.pdf"),
sep="_")),
height=6,
width=10,
pointsize=10)
tcplPlotM4ID(m4ids, lvl=6L)
graphics.off()
codes<-c('C107200')
chem<-tcplLoadChem('code', codes)
dat<-tcplLoadData(lvl=4,fld='spid',val=chem$spid,type='mc')
dat<-dat[!grep('Tox21', spid)]
m4ids <- dat[, m4id]
#make PDF of plots by chemical
graphics.off()
pdf(file=file.path(getwd(),
paste("L6DR",
paste(codes,collapse="."),
format(Sys.Date(),
"%y%m%d.pdf"),
sep="_")),
height=6,
width=10,
pointsize=10)
tcplPlotM4ID(m4ids, lvl=6L)
graphics.off()
tcplVarMat(chid=20292)
codes<-c('C107200')
chem<-tcplLoadChem('code', codes)
dat<-tcplLoadData(lvl=4,fld='spid',val=chem$spid,type='mc')
dat<-dat[!grep('Tox21', spid)]
m4ids <- dat[, m4id]
#make PDF of plots by chemical
graphics.off()
pdf(file=file.path(getwd(),
paste("L6DR",
paste(codes,collapse="."),
format(Sys.Date(),
"%y%m%d.pdf"),
sep="_")),
height=6,
width=10,
pointsize=10)
tcplPlotM4ID(m4ids, lvl=6L)
graphics.off()
tcplVarMat(chid=20292)
codes<-c('C107200')
chem<-tcplLoadChem('code', codes)
dat<-tcplLoadData(lvl=4,fld='spid',val=chem$spid,type='mc')
dat<-dat[!grep('Tox21', spid)]
m4ids <- dat[, m4id]
#make PDF of plots by chemical
graphics.off()
pdf(file=file.path(getwd(),
paste("L6DR",
paste(codes,collapse="."),
format(Sys.Date(),
"%y%m%d.pdf"),
sep="_")),
height=6,
width=10,
pointsize=10)
tcplPlotM4ID(m4ids, lvl=6L)
graphics.off()
tcplVarMat(chid=20292)
codes<-c('C107200')
chem<-tcplLoadChem('code', codes)
dat<-tcplLoadData(lvl=4,fld='spid',val=chem$spid,type='mc')
dat<-dat[!grep('Tox21', spid)]
m4ids <- dat[, m4id]
#make PDF of plots by chemical
graphics.off()
pdf(file=file.path(getwd(),
paste("L6DR",
paste(codes,collapse="."),
format(Sys.Date(),
"%y%m%d.pdf"),
sep="_")),
height=6,
width=10,
pointsize=10)
tcplPlotM4ID(m4ids, lvl=6L)
graphics.off()
tcplVarMat(chid=20292)
codes<-c('C107200')
chem<-tcplLoadChem('code', codes)
dat<-tcplLoadData(lvl=4,fld='spid',val=chem$spid,type='mc')
dat<-dat[!grep('Tox21', spid)]
m4ids <- dat[, m4id]
#make PDF of plots by chemical
graphics.off()
pdf(file=file.path(getwd(),
paste("L6DR",
paste(codes,collapse="."),
format(Sys.Date(),
"%y%m%d.pdf"),
sep="_")),
height=6,
width=10,
pointsize=10)
tcplPlotM4ID(m4ids, lvl=6L)
graphics.off()
tcplVarMat(chid=20292)
codes<-c('C107200')
chem<-tcplLoadChem('code', codes)
dat<-tcplLoadData(lvl=4,fld='spid',val=chem$spid,type='mc')
dat<-dat[!grep('Tox21', spid)]
m4ids <- dat[, m4id]
#make PDF of plots by chemical
graphics.off()
pdf(file=file.path(getwd(),
paste("L6DR",
paste(codes,collapse="."),
format(Sys.Date(),
"%y%m%d.pdf"),
sep="_")),
height=6,
width=10,
pointsize=10)
tcplPlotM4ID(m4ids, lvl=6L)
graphics.off()
tcplVarMat(chid=20292)
codes<-c('C107200')
chem<-tcplLoadChem('code', codes)
dat<-tcplLoadData(lvl=4,fld='spid',val=chem$spid,type='mc')
dat<-dat[!grep('Tox21', spid)]
m4ids <- dat[, m4id]
#make PDF of plots by chemical
graphics.off()
pdf(file=file.path(getwd(),
paste("L6DR",
paste(codes,collapse="."),
format(Sys.Date(),
"%y%m%d.pdf"),
sep="_")),
height=6,
width=10,
pointsize=10)
tcplPlotM4ID(m4ids, lvl=6L)
graphics.off()
tcplVarMat(chid=20292)
codes<-c('C107200')
chem<-tcplLoadChem('code', codes)
dat<-tcplLoadData(lvl=4,fld='spid',val=chem$spid,type='mc')
dat<-dat[!grep('Tox21', spid)]
m4ids <- dat[, m4id]
#make PDF of plots by chemical
graphics.off()
pdf(file=file.path(getwd(),
paste("L6DR",
paste(codes,collapse="."),
format(Sys.Date(),
"%y%m%d.pdf"),
sep="_")),
height=6,
width=10,
pointsize=10)
tcplPlotM4ID(m4ids, lvl=6L)
graphics.off()
tcplVarMat(chid=20292)
codes<-c('C107200')
chem<-tcplLoadChem('code', codes)
dat<-tcplLoadData(lvl=4,fld='spid',val=chem$spid,type='mc')
dat<-dat[!grep('Tox21', spid)]
m4ids <- dat[, m4id]
#make PDF of plots by chemical
graphics.off()
pdf(file=file.path(getwd(),
paste("L6DR",
paste(codes,collapse="."),
format(Sys.Date(),
"%y%m%d.pdf"),
sep="_")),
height=6,
width=10,
pointsize=10)
tcplPlotM4ID(m4ids, lvl=6L)
graphics.off()
tcplVarMat(chid=20292)
killDbConnections <- function () {
all_cons <- dbListConnections(MySQL())
print(all_cons)
for(con in all_cons)
+  dbDisconnect(con)
print(paste(length(all_cons), " connections killed."))
}
killDbConnections()
library(RMySQL)
killDbConnections <- function () {
all_cons <- dbListConnections(MySQL())
print(all_cons)
for(con in all_cons)
+  dbDisconnect(con)
print(paste(length(all_cons), " connections killed."))
}
killDbConnections()
library(tcpl)
library(data.table)
codes<-c('C107200')
chem<-tcplLoadChem('code', codes)
dat<-tcplLoadData(lvl=4,fld='spid',val=chem$spid,type='mc')
dat<-dat[!grep('Tox21', spid)]
m4ids <- dat[, m4id]
graphics.off()
pdf(file=file.path(getwd(),
paste("L6DR",
paste(codes,collapse="."),
format(Sys.Date(),
"%y%m%d.pdf"),
sep="_")),
height=6,
width=10,
pointsize=10)
tcplPlotM4ID(m4ids, lvl=6L)
graphics.off()
library(tcpl)
tcplConf(user='kpaulfri', pass='password1', db='invitrodb', host='au.epa.gov', drvr='MySQL')
tcplConf(user='kpaulfri', pass='password1', db='invitrodb', host='au.epa.gov', drvr='MySQL')
tcplConf(user='kpaulfri', pass='password1', db='invitrodb', host='au.epa.gov', drvr='MySQL')
tcplConf(user='kpaulfri', pass='password1', db='invitrodb', host='au.epa.gov', drvr='MySQL')
tcplMthdLoad(lvl=3, id=1, type='mc')
tcplMthdLoad(lvl=3, id=1, type='mc')
tcplMthdLoad(lvl=3, id=1, type='mc')
tcplMthdLoad(lvl=3, id=1, type='mc')
tcplMthdLoad(lvl=3, id=1, type='mc')
tcplLoadAcid(fld='asid', val=1)
tcplLoadAcid(fld='asid', val=1)
tcplLoadAcid(fld='asid', val=1)
tcplLoadAcid(fld='asid', val=1)
tcplLoadAcid(fld='asid', val=1)
tcplLoadAcid(fld='asid', val=1)
tcplLoadAcid(fld='asid', val=1)
tcplLoadAcid(fld='asid', val=1)
?cov2cor()
library(tcpl)
tcplConf(user='kpaulfri', pass='password1', db='invitrodb', drvr='MySQL', host='au.epa.gov')
tcplLoadAsid()
tcplLoadAcid(fld='asid', val=18)
tcplLoadAeid(fld='asid', val=18)
mc5<-tcplPrepOtpt(tcplLoadData(lvl=5, fld='aeid', val=1806, type='mc'))
View(mc5)
unique(mc5, casn)
unique(mc5[,chid])
mc5v2<-tcplPrepOtpt(tcplLoadData(lvl=5, fld='aeid', val=1808, type='mc'))
mc5v3<-tcplPrepOtpt(tcplLoadData(lvl=5, fld='aeid', val=1813, type='mc'))
mc5v4<-tcplPrepOtpt(tcplLoadData(lvl=5, fld='aeid', val=1812, type='mc'))
mc5v5<-tcplPrepOtpt(tcplLoadData(lvl=5, fld='aeid', val=1810, type='mc'))
mc5v6<-tcplPrepOtpt(tcplLoadData(lvl=5, fld='aeid', val=1809, type='mc'))
View(mc5v4)
library(tcpl)
tcplConf(user='kpaulfri', pass='password1', db='invitrodb', drvr='MySQL', host='au.epa.gov')
tcplLoadAeid(fld='asid', val=18)
library(gplots)
venn(list(A=1:5,B=4:6, C=c(4,8:10)))
install.packages("VennDiagram")
library(tcpl)
tcplConf(user='kpaulfri', pass='password1', db='invitrodb', drvr='MySQL', host='au.epa.gov')
tcplLoadAeid(fld='asid', val=8)
tcplMthdLoad(lvl=3, id=906, type='mc')
tcplMthdLoad(lvl=5, id=906, type='mc')
library(tcpl)
tcplConf(user='kpaulfri', pass='password1', db='invitrodb', host='au.epa.gov', drvr='MySQL')
aeids <- tcplLoadAeid("asid",8)$aeid
acids <- tcplLoadAcid("asid",8)$acid
sc2 <- tcplPrepOtpt(tcplLoadData(2L, 'aeid', aeids, type = 'sc'))
sc2 <- tcplPrepOtpt(tcplLoadData(2L, 'aeid', 890L, type = 'sc'))
library(dplyr)
colnames(sc2)
count(sc2,'chid')
count(sc2,'chnm')
View(sc2)
sc2<-unique(sc2[,c("chnm"), with=FALSE])
View(sc2)
library(tcpl)
tcplConf(user='kpaulfri', pass='password1', db='invitrodb', host='au.epa.gov', drvr='MySQL')
chemdb<-tcplLoadChem()
View(chemdb)
tcplLoadAeid(fld='asid', val=8)
mc0<-tcplPrepOtpt(tcplLoadData(lvl=0, fld='aeid', val=899, type='mc'))
tcplLoadAcid(fld='asid', val=8)
mc0<-tcplPrepOtpt(tcplLoadData(lvl=0, fld='acid', val=590, type='mc'))
View(mc0)
mc0<-tcplPrepOtpt(tcplLoadData(lvl=0, fld='acid', val=1017, type='mc'))
View(mc0)
tcplMthdLoad(lvl=3, id=1663, type='mc')
mc0<-tcplPrepOtpt(tcplLoadData(lvl=0, fld='acid', val=1017, type='mc'))
View(mc0)
install.packages("rmarkdown")
---title: "R Markdown"
---
title: "Bioactivity as a Conservative POD"
author: "Katie Paul Friedman"
date: "July 21, 2017"
output: html_document
---
```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```
## R Markdown
This is an R Markdown document. Markdown is a simple formatting syntax for authoring HTML, PDF, and MS Word documents. For more details on using R Markdown see <http://rmarkdown.rstudio.com>.
When you click the **Knit** button a document will be generated that includes both content as well as the output of any embedded R code chunks within the document. You can embed an R code chunk like this:
```{r cars}
summary(cars)
```
## Including Plots
You can also embed plots, for example:
```{r pressure, echo=FALSE}
plot(pressure)
```
Note that the `echo = FALSE` parameter was added to the code chunk to prevent printing of the R code that generated the plot.
knitr::opts_chunk$set(echo = TRUE)
library(tcpl)
tcplConf(user='kpaulfri', pass='password1', db='invitrodb', drvr='MySQL', host='au.epa.gov')
mc0<-tcplLoadData(lvl=0, fld='acid', val=84, type='mc')
View(mc0)
unique(mc0(apid))
unique(mc0$apid)
dim(mc0)
tcplLoadAsid()
mc0.ATG<-tcplLoadData(lvl=0, fld='asid', val=3, type='mc')
tcplLoadAcid(fld='asid', val=3)
acid.table<-tcplLoadAcid(fld='asid', val=3)
mc0.ATG<-tcplLoadData(lvl=0, fld='acid', val=acid.table$acid, type='mc')
apids<-unique(mc0.ATG[,apid])
View(mc0.ATG)
mc0.mtt<-tcplPrepOtpt(tcplLoadData(lvl=0, fld='acid', val=1017, type='mc'))
View(mc0.mtt)
mc0.mtt.n<-mc0.mtt[wllt=='n']
View(mc0.mtt.n)
library(dplyr)
count(mc0.mtt.n, 'spid')
unique(mc0.mtt.n, spid)
unique(mc0.mtt.n, 'spid')
unique(mc0.mtt.n$spid)
mc0.mtt.p<-mc0.mtt[wllt=='p']
unique(mc0.mtt.p$spid)
hist(mc0.mtt[wllt=='p']$rval)
hist(mc0.mtt[wllt=='n']$rval)
hist(mc0.mtt$rval)
hist(mc0.mtt[spid=='Forskolin']$rval)
tcplMthdList(lvl=2, type='mc')
setwd('L:/Lab/NCCT_ToxCast/Derik Haggard/OECD Analysis/R Project/RData')
load('AllResps2017-07-31_2017-07-31-3544498.RData')
View(Mahalanobis_dat)
range(Mahalanobis_dat$maxD11P)
library(data.table)
Mahalanobis_dat[,md.adj := (maxD11P - Scrit01)]
positives<-Mahalanobis_dat[md.adj>0]
length(unique(positives$chnm))
length(unique(Mahalanobis_dat$chnm))
View(Mahalanobis_dat)
